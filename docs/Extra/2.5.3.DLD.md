# 2.5.3. Diagrama Lógico de Dados

## Introdução

O Diagrama Lógico de Dados (DLD) representa a segunda fase do processo de modelagem de dados, situando-se entre o modelo conceitual (DER) e o modelo físico do banco de dados. Esta etapa crucial do projeto de banco de dados tem como objetivo transformar o modelo conceitual em uma estrutura mais próxima da implementação, incorporando aspectos específicos do Sistema de Gerenciamento de Banco de Dados (SGBD) escolhido, sem ainda considerar detalhes físicos como índices, particionamento ou otimizações de armazenamento (ELMASRI; NAVATHE, 2019).

O modelo lógico mantém a independência de plataforma específica, mas introduz elementos como tipos de dados, chaves primárias e estrangeiras, restrições de integridade e normalizações necessárias para garantir a consistência e eficiência dos dados. Durante esta fase, as entidades do modelo conceitual são transformadas em tabelas, os atributos tornam-se colunas com tipos de dados específicos, e os relacionamentos são implementados através de chaves estrangeiras (DATE, 2012). Este processo de mapeamento segue regras bem estabelecidas que garantem a preservação da semântica do modelo conceitual.

No contexto do sistema AquiTemFCTE, o DLD desempenha um papel fundamental na definição da estrutura de dados que suportará as operações do marketplace acadêmico. Através desta modelagem, são especificadas as tabelas necessárias para armazenar informações sobre usuários, produtos, transações, categorias e demais entidades do sistema, bem como suas inter-relações e restrições de integridade. A qualidade do modelo lógico impacta diretamente na performance, manutenibilidade e escalabilidade do sistema, tornando esta etapa essencial para o sucesso do projeto (RAMAKRISHNAN; GEHRKE, 2011).

## Diagrama

<font size="2"><p style="text-align: center"><b>Figura 1:</b> Diagrama Lógico de Dados</p></font>
![diagrama-de-classes](/../Assets/DLD.png)

<font size="2"><p style="text-align: center"><b>Fonte:</b> Lucas Guimarães</p></font>

As entidades do DER foram mapeadas para as seguintes tabelas, com a definição de seus respectivos campos e chaves:

**Tabela Aluno:**
Representa os usuários do sistema.
- matricula (PK - CHAR(9)): Chave primária que identifica unicamente cada aluno.
- nomeSobrenome (VARCHAR(80)), 
- emailInstitucional (VARCHAR(80)), 
- senha (INTEGER), 
- fotoPerfil (BIT), 
- comprovanteMatricula (BIT): Colunas que armazenam os dados do aluno.

**Tabela Produto:**
Armazena os itens anunciados na plataforma.
- idProduto (PK - INTEGER): Chave primária para identificar o produto.
- matricula (FK - CHAR(9)): Chave estrangeira que implementa o relacionamento 1:N com a tabela Aluno, indicando qual aluno vende o produto.
- nome (VARCHAR(80)), 
- preco (REAL(4,2)), 
- foto (BIT), 
- trocaveis (VARCHAR(100)): Atributos do produto.
- tipoNegociacao (ENUM('venda', 'troca')): Restringe o campo a valores pré-definidos.

**Tabela Carrinho:**
Representa o carrinho de compras.
- idCarrinho (PK - INTEGER): Chave primária.
- matricula (FK - CHAR(9)): Chave estrangeira que implementa o relacionamento 1:1 com a tabela Aluno, garantindo que cada carrinho seja para apenas 1 aluno.

**Tabela Compra:**
Registra as transações finalizadas.
- idCompra (PK - INTEGER): Chave primária da compra.
- idCarrinho (FK - INTEGER): Chave estrangeira que referencia o Carrinho que originou a compra, implementando o relacionamento 1:N.
- precoTotal (REAL(4,2)), 
- dataHoraCompra (TIMES): Detalhes da transação.

**Tabela Categoria:**
Define as categorias dos produtos.
- idCategoria (PK - INTEGER): Chave primária.
- nomeCategoria (VARCHAR(80)): Nome da categoria.

### Resolução de Relacionamentos N:N

Os relacionamentos "muitos-para-muitos" (N:N) identificados no DER foram resolvidos através da criação de tabelas associativas, uma prática padrão na modelagem relacional:

**Tabela Favorito:**
Resolve o relacionamento N:N entre Aluno e Produto.
Possui uma chave primária composta pelas chaves estrangeiras matricula (FK de Aluno) e idProduto (FK de Produto). Cada linha nesta tabela representa um aluno que favoritou um produto específico.

**Tabela ProdutoCarrinho:**
Resolve o relacionamento N:N entre Produto e Carrinho.
Sua chave primária é composta por idProduto (FK de Produto) e idCarrinho (FK de Carrinho), permitindo que um carrinho contenha vários produtos e que um produto esteja em vários carrinhos.

**Tabela ProdutoCategoria:**
Resolve o relacionamento N:N entre Produto e Categoria.
Sua chave primária é formada por idProduto (FK de Produto) e idCategoria (FK de Categoria), permitindo que um produto seja associado a múltiplas categorias.

## Referências

DATE, C. J. **Introdução a sistemas de bancos de dados**. 8. ed. Rio de Janeiro: Elsevier, 2012.

ELMASRI, Ramez; NAVATHE, Shamkant B. **Sistemas de banco de dados**. 7. ed. São Paulo: Pearson Education do Brasil, 2019.

RAMAKRISHNAN, Raghu; GEHRKE, Johannes. **Sistemas de gerenciamento de banco de dados**. 3. ed. São Paulo: McGraw-Hill, 2011.

SILBERSCHATZ, Abraham; KORTH, Henry F.; SUDARSHAN, S. **Sistema de banco de dados**. 6. ed. Rio de Janeiro: Elsevier, 2012.

## Histórico de Versão

| Versão | Data | Descrição | Autor(es) | Revisor(es) | Detalhes da Revisão |
| ------ | ---- | --------- | --------- | ----------- | ------------------- |
| 1.0    | 22/09/2025 | Adiciona introdução e Referências | [Daniel Rodrigues](https://github.com/DanielRogs) | [Davi Camilo](https://github.com/Davicamilo23) | Revisão não identificou erros |
| 1.1    | 22/09/2025 | Inserção Diagrama DLD | [Lucas Guimarães](https://github.com/lcsgborges) | [Daniel Rodrigues](https://github.com/DanielRogs) | Revisão e conformidade com o que foi produzido |
| 1.2    | 22/09/2025 | Adiciona explicação do Diagrama DLD | [Daniel Rodrigues](https://github.com/DanielRogs) | [Davi Camilo](https://github.com/Davicamilo23) | Solicitou padronização do titulo do documento |
| 1.3   | 22/09/2025 | Padroniza titulo | [Daniel Rodrigues](https://github.com/DanielRogs) | [Davi Camilo](https://github.com/Davicamilo23) | Revisado e aprovado |